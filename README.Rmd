---
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# tidyorgs: A tidy package that standardizes text data for organizational and geographic analysis

**Authors:** [Brandon Kramer](https://www.brandonleekramer.com/) with contributions from members of the [University of Virginia's Biocomplexity Institute](https://biocomplexity.virginia.edu/institute/divisions/social-and-decision-analytics), the [National Center for Science and Engineering Statistics](https://www.nsf.gov/statistics/), and the [2020](https://dspg-young-scholars-program.github.io/dspg20oss/team/?dspg) and [2021](https://dspgtools.shinyapps.io/dspg21oss/) [UVA Data Science for the Public Good Open Source Software Teams](https://biocomplexity.virginia.edu/institute/divisions/social-and-decision-analytics/dspg)<br/>
**License:** [MIT](https://opensource.org/licenses/MIT)<br/>

### Installation

You can install this package using the `devtools` package:

```{r, eval=FALSE, warning=FALSE, message=FALSE}
install.packages("devtools")
devtools::install_github("brandonleekramer/tidyorgs") 
```

The `tidyorgs` package provides several functions that help standardize messy text data for organizational analysis. More specifically, the package's two core functions `detect_orgs()` and `email_to_orgs()` standardize organizations from across the academic, business, government and nonprofit sectors based on unstructured text and email domains. The package is intended to support linkage across multiple datasets, bibliometric analysis, and sector classification for social, economic, and policy analysis.

### Matching organizations with the `detect_orgs()` function

```{r, warning=FALSE, message=FALSE}
library(tidyverse)
library(tidyorgs)
data(github_users)

users_to_orgs <- github_users %>%
  detect_orgs(login, company, organization, academic, email, 
              country = TRUE, parent_org = TRUE, org_type = TRUE) 

users_to_orgs %>% 
  filter(academic == 1) %>% 
  select(organization, company) 
```
```{r, warning=FALSE, message=FALSE}
users_to_orgs %>% 
  filter(academic == 1) %>% 
  select(organization, country, org_type) 
```


### Matching users to organizations by emails alone using the `email_to_orgs()` function

```{r, warning=FALSE, message=FALSE}
user_emails_to_orgs <- github_users %>%
  email_to_orgs(login, email, country_name, academic) 

github_users %>% 
  left_join(user_emails_to_orgs, by = "login") %>% 
  drop_na(country_name) %>% 
  select(email, country_name)
```

